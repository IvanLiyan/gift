{"remainingRequest":"/Users/ili/Documents/github/gift/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ili/Documents/github/gift/src/components/Lottery.Turntable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ili/Documents/github/gift/src/components/Lottery.Turntable.vue","mtime":1645501590959},{"path":"/Users/ili/Documents/github/gift/node_modules/cache-loader/dist/cjs.js","mtime":1645501672170},{"path":"/Users/ili/Documents/github/gift/node_modules/babel-loader/lib/index.js","mtime":1645501673323},{"path":"/Users/ili/Documents/github/gift/node_modules/cache-loader/dist/cjs.js","mtime":1645501672170},{"path":"/Users/ili/Documents/github/gift/node_modules/vue-loader/lib/index.js","mtime":1645501675185}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEdMT0JBTF9LRVlTLCBnaWZ0cywgaG9tZUNvbmZpZyB9IGZyb20gJy4uL2dpZnQuc2V0dGluZy5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG90dGVyeVR1cm50YWJsZScsCiAgZGF0YSgpIHsKICAgIHRoaXMuZGVmYXVsdFN0eWxlID0gewogICAgICBmb250Q29sb3I6ICIjQUZGRkQ3IiwKICAgICAgZm9udFNpemU6ICIxMHB4IiwKICAgICAgbGluZUhlaWdodDogIjEzcHgiLAogICAgICB3b3JkV3JhcDogZmFsc2UsCiAgICB9OwogICAgdGhpcy5hY3RpdmVTdHlsZSA9IHsKICAgICAgZm9udENvbG9yOiAiI2ZmZiIsCiAgICB9OwogICAgdGhpcy5ibG9ja3MgPSBbCiAgICAgIHsgcGFkZGluZzogIjEwcHgiLCBiYWNrZ3JvdW5kOiAicmdiYSgwLCAwLCAwLCAwKSIsIGJvcmRlclJhZGl1czogIjEwcHgiIH0sCiAgICBdOwogICAgdGhpcy5idXR0b25zID0gWwogICAgICB7CiAgICAgICAgeDogMSwKICAgICAgICB5OiAxLAogICAgICAgIGJhY2tncm91bmQ6ICJyZ2JhKDAsIDAsIDAsIDApIiwKICAgICAgICBmb250czogW10sCiAgICAgICAgaW1nczogWwogICAgICAgICAgewogICAgICAgICAgICBzcmM6IHJlcXVpcmUoIi4uL2Fzc2V0cy9pbWFnZXMvYnV0dG9uLnBuZyIpLAogICAgICAgICAgICB3aWR0aDogIjEwMCUiLAogICAgICAgICAgICB0b3A6ICIwIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIF07CiAgICByZXR1cm4gewogICAgICBwcml6ZXM6IFtdLAogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBnZXRHaWZ0TGlzdCgpIHsKICAgICAgY29uc3QgcHJpemVzID0gW107CiAgICAgIGxldCBheGlzID0gW1swLCAwXSwgWzEsIDBdLCBbMiwgMF0sIFsyLCAxXSwgWzIsIDJdLCBbMSwgMl0sIFswLCAyXSwgWzAsIDFdLF07CiAgICAgIGxldCBkYXRhID0gZ2lmdHMubWFwKGl0ZW0gPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBmdWxsTmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgbmFtZTogaXRlbS5hbGlhcywKICAgICAgICAgIGltZzogcmVxdWlyZShgLi4vLi4vcHVibGljJHtpdGVtLmltYWdlfWApLAogICAgICAgICAgdG9wOiAnNzAlJywKICAgICAgICB9OwogICAgICB9KTsKICAgICAgCiAgICAgIC8vIGxldCBkYXRhID0gW107CiAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsKICAgICAgICBwcml6ZXMucHVzaCh7CiAgICAgICAgICB4OiBheGlzW2luZGV4XVswXSwKICAgICAgICAgIHk6IGF4aXNbaW5kZXhdWzFdLAogICAgICAgICAgdGl0bGU6IGl0ZW0ubmFtZSwKICAgICAgICAgIGZ1bGxOYW1lOiBpdGVtLmZ1bGxOYW1lLAogICAgICAgICAgZm9udHM6IFt7IHRleHQ6IGl0ZW0ubmFtZSwgdG9wOiBpdGVtLnRvcCB9XSwKICAgICAgICAgIGltZ3M6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIHNyYzogcmVxdWlyZSgnLi4vYXNzZXRzL2ltYWdlcy9ibG9jay1iZy5wbmcnKSwKICAgICAgICAgICAgICBhY3RpdmVTcmM6IHJlcXVpcmUoJy4uL2Fzc2V0cy9pbWFnZXMvYWN0aXZlLWJsb2NrLWJnLnBuZycpLAogICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsCiAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBzcmM6IGl0ZW0uaW1nLAogICAgICAgICAgICAgIHdpZHRoOiAnNzAlJywKICAgICAgICAgICAgICB0b3A6ICczJScsCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5wcml6ZXMgPSBwcml6ZXM7CiAgICB9LAogICAgc3RhcnRDYWxsQmFjayAoKSB7CiAgICAgIHRoaXMuJHJlZnMubHVja3lHcmlkLnBsYXkoKTsKICAgICAgbGV0IHRhcmdldEdpZnRJbmRleCA9IGhvbWVDb25maWcudGFyZ2V0R2lmdEluZGV4OwogICAgICBpZiAoISF0YXJnZXRHaWZ0SW5kZXggPT09IGZhbHNlKSB7CiAgICAgICAgdGFyZ2V0R2lmdEluZGV4ID0gTWF0aC5yYW5kb20oKSAqIDggPj4gMDsKICAgICAgfQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLmx1Y2t5R3JpZC5zdG9wKHRhcmdldEdpZnRJbmRleCkKICAgICAgfSwgaG9tZUNvbmZpZy50aW1lb3V0KTsKICAgIH0sCiAgICBlbmRDYWxsQmFjayAocHJpemUpIHsKICAgICAgY29uc3QgeyBpbWdzLCBmdWxsTmFtZSB9ID0gcHJpemU7CiAgICAgIGNvbnN0IGltYWdlVXJsID0gaW1nc1sxXS5zcmM7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKEdMT0JBTF9LRVlTLkVYSVNUX0tFWSwgJzEnKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oR0xPQkFMX0tFWVMuTkFNRV9LRVksIGZ1bGxOYW1lKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oR0xPQkFMX0tFWVMuSU1BR0VfS0VZLCBpbWFnZVVybCk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuJGVtaXQoJ3N1Y2Nlc3MnKTsKICAgICAgfSwgMTIwMCk7CiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0R2lmdExpc3QoKTsKICB9LCAKfTsK"},{"version":3,"sources":["Lottery.Turntable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Lottery.Turntable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"lottery-turntable-component full-screen\">\n    <LuckyGrid\n      class=\"lucky-grid\"\n      ref=\"luckyGrid\"\n      width=\"300px\"\n      height=\"300px\"\n      :prizes=\"prizes\"\n      :blocks=\"blocks\"\n      :buttons=\"buttons\"\n      :default-style=\"defaultStyle\"\n      :active-style=\"activeStyle\"\n      @start=\"startCallBack\"\n      @end=\"endCallBack\"\n    />\n  </div>\n</template>\n\n<script>\nimport { GLOBAL_KEYS, gifts, homeConfig } from '../gift.setting.js';\nexport default {\n  name: 'LotteryTurntable',\n  data() {\n    this.defaultStyle = {\n      fontColor: \"#AFFFD7\",\n      fontSize: \"10px\",\n      lineHeight: \"13px\",\n      wordWrap: false,\n    };\n    this.activeStyle = {\n      fontColor: \"#fff\",\n    };\n    this.blocks = [\n      { padding: \"10px\", background: \"rgba(0, 0, 0, 0)\", borderRadius: \"10px\" },\n    ];\n    this.buttons = [\n      {\n        x: 1,\n        y: 1,\n        background: \"rgba(0, 0, 0, 0)\",\n        fonts: [],\n        imgs: [\n          {\n            src: require(\"../assets/images/button.png\"),\n            width: \"100%\",\n            top: \"0\",\n          },\n        ],\n      },\n    ];\n    return {\n      prizes: [],\n    };\n  },\n\n  methods: {\n    getGiftList() {\n      const prizes = [];\n      let axis = [[0, 0], [1, 0], [2, 0], [2, 1], [2, 2], [1, 2], [0, 2], [0, 1],];\n      let data = gifts.map(item => {\n        return {\n          fullName: item.name,\n          name: item.alias,\n          img: require(`../../public${item.image}`),\n          top: '70%',\n        };\n      });\n      \n      // let data = [];\n      data.forEach((item, index) => {\n        prizes.push({\n          x: axis[index][0],\n          y: axis[index][1],\n          title: item.name,\n          fullName: item.fullName,\n          fonts: [{ text: item.name, top: item.top }],\n          imgs: [\n            {\n              src: require('../assets/images/block-bg.png'),\n              activeSrc: require('../assets/images/active-block-bg.png'),\n              width: '100%',\n              height: '100%',\n            },\n            {\n              src: item.img,\n              width: '70%',\n              top: '3%',\n            },\n          ],\n        });\n      });\n      this.prizes = prizes;\n    },\n    startCallBack () {\n      this.$refs.luckyGrid.play();\n      let targetGiftIndex = homeConfig.targetGiftIndex;\n      if (!!targetGiftIndex === false) {\n        targetGiftIndex = Math.random() * 8 >> 0;\n      }\n      setTimeout(() => {\n        this.$refs.luckyGrid.stop(targetGiftIndex)\n      }, homeConfig.timeout);\n    },\n    endCallBack (prize) {\n      const { imgs, fullName } = prize;\n      const imageUrl = imgs[1].src;\n      localStorage.setItem(GLOBAL_KEYS.EXIST_KEY, '1');\n      localStorage.setItem(GLOBAL_KEYS.NAME_KEY, fullName);\n      localStorage.setItem(GLOBAL_KEYS.IMAGE_KEY, imageUrl);\n      setTimeout(() => {\n        this.$emit('success');\n      }, 1200);\n    }\n  },\n\n  mounted() {\n    this.getGiftList();\n  }, \n};\n</script>\n\n<style scoped>\n.lottery-turntable-component {\n  background-color: #fad3e6;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.lucky-grid {\n  width: 300px;\n  height: 300px;\n  background: rgb(245, 171, 184);\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n}\n</style>"]}]}